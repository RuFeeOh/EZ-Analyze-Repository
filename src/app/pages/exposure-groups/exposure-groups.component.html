<!-- <div style="margin-bottom:8px; display:flex; align-items:center; gap:8px;">
    <label>
        <input type="checkbox"
               [checked]="privateMode()"
               (change)="onTogglePrivate($any($event.target).checked)">
        Private (my groups)
    </label>
</div> -->

@let groups = (exposureGroups$ | async);

<div class="page-loading"
     *ngIf="!groups || groups.length === 0"
     style="display:flex; align-items:center; justify-content:center; height: 40vh;">
    <mat-progress-spinner mode="indeterminate"
                          diameter="48"></mat-progress-spinner>
</div>

<ez-table *ngIf="groups && groups.length > 0"
          [items]="groups"
          [summaryColumns]="[
		{ Name: 'ExposureGroup', DisplayName: 'Exposure Group' },
        { Name: 'ResultsTotalCount', DisplayName: 'Samples' }
	]"
          [detailColumns]="['SampleDate','ExposureGroup','TWA','Notes','SampleNumber']"
          [detailFor]="detailForFn">
    <ng-template #cell
                 let-item
                 let-id="id"
                 let-value="value">
        <ng-container [ngSwitch]="id">
            <ng-container *ngSwitchCase="'plantName'">
                <span [matTooltip]="item?.plantJobNeedsReview ? 'Needs manual review - low confidence extraction' : ''">
                    {{ value || '-' }}
                    <mat-icon *ngIf="item?.plantJobNeedsReview"
                              inline
                              style="font-size: 16px; width: 16px; height: 16px; color: orange;">warning</mat-icon>
                </span>
            </ng-container>
            <ng-container *ngSwitchCase="'jobName'">
                <span [matTooltip]="item?.plantJobNeedsReview ? 'Needs manual review - low confidence extraction' : ''">
                    {{ value || '-' }}
                    <mat-icon *ngIf="item?.plantJobNeedsReview"
                              inline
                              style="font-size: 16px; width: 16px; height: 16px; color: orange;">warning</mat-icon>
                </span>
            </ng-container>
            <ng-container *ngSwitchCase="'SampleDate'">{{ value | date:'mediumDate' }}</ng-container>
            <ng-container *ngSwitchCase="'TWA'">{{ value | number:'1.3-3' }}</ng-container>
            <ng-container *ngSwitchDefault>{{ value }}</ng-container>
        </ng-container>
    </ng-template>
</ez-table>