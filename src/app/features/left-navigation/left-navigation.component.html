<mat-drawer-container class="app-container">
   <mat-drawer #drawer
               mode="side"
               opened
               class="app-sidenav">
      <mat-nav-list>
         <a mat-list-item
            routerLink="/org"
            routerLinkActive="mdc-list-item--activated">Org</a>
         <a mat-list-item
            *ngIf="organizationService.orgStore.currentOrg()?.Name"
            routerLink="/data"
            routerLinkActive="mdc-list-item--activated">Data Upload</a>
         <a mat-list-item
            *ngIf="organizationService.orgStore.currentOrg()?.Name"
            routerLink="/exceedance-fraction"
            [queryParams]="{ agent: 'all' }"
            [queryParamsHandling]="'merge'"
            [class.mdc-list-item--activated]="router.isActive('/exceedance-fraction', { paths: 'subset', queryParams: 'subset', fragment: 'ignored', matrixParams: 'ignored' })">
            Exceedance Fractions
         </a>

         <!-- If exceedance-fraction page is active -->
         @if (
         router.isActive('/exceedance-fraction', { paths: 'subset', queryParams: 'subset', fragment: 'ignored', matrixParams: 'ignored' })
         && agents().length > 1
         ) {
         <div class="agent-list">
            <a mat-list-item
               class="sub-item"
               routerLink="/exceedance-fraction"
               [queryParams]="{ agent: 'all' }"
               routerLinkActive="mdc-list-item--activated">
               All
            </a>
            @for (a of agents(); track $index) {
            <a mat-list-item
               class="sub-item"
               routerLink="/exceedance-fraction"
               [queryParams]="{ agent: a?.Name }"
               routerLinkActive="mdc-list-item--activated">
               {{ a?.Name }}
            </a>
            }
         </div>
         }

         <a mat-list-item
            *ngIf="organizationService.orgStore.currentOrg()?.Name"
            routerLink="/exposure-groups"
            routerLinkActive="mdc-list-item--activated">Exposure Groups</a>
         <a mat-list-item
            *ngIf="organizationService.orgStore.currentOrg()?.Name"
            routerLink="/agents"
            routerLinkActive="mdc-list-item--activated">Agents</a>
         <a mat-list-item
            *ngIf="organizationService.orgStore.currentOrg()?.Name"
            routerLink="/scheduling-statistics"
            routerLinkActive="mdc-list-item--activated">Scheduling Statistics</a>
      </mat-nav-list>
   </mat-drawer>
   <mat-drawer-content>
      <div class="content">
         <router-outlet />
      </div>
   </mat-drawer-content>
</mat-drawer-container>